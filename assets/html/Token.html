<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/token.css"/>

    <title>Página de Token</title>
  </head>
  <body>
    <aside>
      <a href="../../index.html">
        <img
        class="logo"
        src="../imgs/logo.svg"
        alt="logo da agromax"
        />
      </a>
      <nav>
        <ul class="lista-links">
          <li>
          <a href="../html/Dashboard.html">
            <button class="link-home"> 
              Introdução
              <img
                class="img-links"
                src="../imgs/home.svg"
              />
            </button>
          </a>
          </li>
          <li>
            <button class="link-dados" >   
              Dados
              <img class="img-links" src="../imgs/data.svg" />
            </button>
          </li>
          <li>
            <a href="./recomendacoes.html">
              <button class="link-recomendacoes">Recomendações</button>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <main>
    <div class="conteudo">
          <h1>Insira o token de identificação do aparelho:</h1>

         <div class="input-container">
          <input value="XAF-5768-WY" type="text" id="token-input" placeholder="Formato(ABC-1234-XY)" required/> <!--Formato: ABC-1234-XY-->
          <button  class="token-button">Inserir</button>
        </div>
     </div>

    </main>



    <script>

      document.querySelector('.token-button').addEventListener("click", function(event) {
        event.preventDefault();

        const tokenInput = document.getElementById('token-input');

        const token = tokenInput.value;

        const tokenFormat = /^[A-Z]{3}-\d{4}-[A-Z]{2}$/;

        if (tokenFormat.test(token)) {

          alert("Token confirmado com sucesso!");
          alert("Por favor aguarde...");

          setTimeout(function() {
            alert("Coletando Dados...");
            alert("Redirecionando para a Página de Dados...");
            
            setTimeout(function() {
              window.location.href = "./Graficos.html";
            }, 2000);

          }, 6000);

        } 

        else {
          alert("Token inválido! Por favor, insira um token no formato correto.");
        }
      });
    </script>
  </body>
</html>
